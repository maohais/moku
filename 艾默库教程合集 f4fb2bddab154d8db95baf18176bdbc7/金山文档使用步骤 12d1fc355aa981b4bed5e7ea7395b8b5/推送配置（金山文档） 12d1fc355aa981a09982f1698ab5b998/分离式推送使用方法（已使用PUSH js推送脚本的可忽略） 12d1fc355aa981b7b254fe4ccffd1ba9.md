# 分离式推送使用方法（已使用PUSH.js推送脚本的可忽略）

具体推送配置填写请查看“[**推送配置（金山文档）**](../%E6%8E%A8%E9%80%81%E9%85%8D%E7%BD%AE%EF%BC%88%E9%87%91%E5%B1%B1%E6%96%87%E6%A1%A3%EF%BC%89%2012d1fc355aa981a09982f1698ab5b998.md)”文章

# **说明**

**支持消息合并推送、消息分平台推送（金山文档）**

![1.png](%E5%88%86%E7%A6%BB%E5%BC%8F%E6%8E%A8%E9%80%81%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%88%E5%B7%B2%E4%BD%BF%E7%94%A8PUSH%20js%E6%8E%A8%E9%80%81%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%AF%E5%BF%BD%E7%95%A5%EF%BC%89%2012d1fc355aa981b7b254fe4ccffd1ba9/707644cf-0dc1-4060-8cf0-7d3fd4343107.png)

本次更新针对金山文档。本次更新新增功能独立多平台推送、消息池整合推送、只生成存活的表格配置。

**推送方式：**

**@all方式代表在PUSH表内的消息推送平台都推送（bark、pushplus、钉钉等等）**

**bark方式代表，仅用推送bark**

**dingtalk方式代表，仅用推送钉钉**

**bark&pushplus方式，同时推送bark和pushplus。用&连接**

**bark&email&pushplus方式，同时推送bark、email和pushplus。**

**加入消息池：**

这个的意思是“加入消息池”选项勾选“是”的就会**合并为一条消息进行通知**，以@all方式推送。例如你运行了8个签到任务，那么在某个时刻只收到1条通知消息。

默认为“否”，代表每个签到结果都用**独立的一条**消息通知。例如你运行了8个签到任务，那么在某个时刻会同时收到8条通知消息。

# 如何使用（三步走，已使用原签到脚本，也需更新具体签到脚本）

1. **更新UPDATE脚本**

从github复制最新UPDATE.js脚本，并运行，即可生成最新的CONFIG表格。

![8.webp](../29063153-83f1-4bbc-ad47-2c52d8b31ae6.png)

![9.webp](../b6e191ac-305e-4f2b-9bb2-20d24a1e700e.png)

![10.webp](../9be5751e-8048-4652-a0cf-dc7d5e31b014.png)

进入github中复制最新的UPDATE.js的代码（此为更新脚本，运行则会自动新增表格配置、不会覆盖原有信息）

将复制的UPDATE.js代码粘贴到脚本编辑器中，点击"保存"，再点击运行。当UPDATE脚本运行完后，会自动生成配置表格。

![11.webp](../998acb1b-bdd0-4573-b41b-0292f32153cf.png)

![12.webp](../07d5bab7-3b19-49b6-bc85-f84ededb234d.png)

**2.加PUSH脚本**

从github复制最新的PUSH.js脚本。

**3.将PUSH脚本加入定时任务**。

![2.webp](%E5%88%86%E7%A6%BB%E5%BC%8F%E6%8E%A8%E9%80%81%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%88%E5%B7%B2%E4%BD%BF%E7%94%A8PUSH%20js%E6%8E%A8%E9%80%81%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%AF%E5%BF%BD%E7%95%A5%EF%BC%89%2012d1fc355aa981b7b254fe4ccffd1ba9/134d31dc-0566-4c8a-b204-aa63bb165f80.png)

PUSH定时任务的时间可以定在所有任务执行完后的时间。

也可以一天定多个PUSH定时任务，时间任意，例如：8:00、12:00、16:00。时间到后会检查哪些脚本没推送，就会进行推送了。

![3.webp](%E5%88%86%E7%A6%BB%E5%BC%8F%E6%8E%A8%E9%80%81%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%88%E5%B7%B2%E4%BD%BF%E7%94%A8PUSH%20js%E6%8E%A8%E9%80%81%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%AF%E5%BF%BD%E7%95%A5%EF%BC%89%2012d1fc355aa981b7b254fe4ccffd1ba9/6bd3af73-9d15-479b-b1a1-f08f58bba796.png)

依次点击“高级开发”-“定时任务”，将刚刚的脚本添加到定时任务中。

点击“创建任务”-“每天”，选择此脚本。此时就完成了，每天指定时间将会进行推送。

![20.webp](../7533f307-807c-4072-ab99-75aecf44bddf.png)

![22.webp](../3c8dc7ac-7707-47d6-8400-d88831f8233f.png)

# **问题**

**问：推送方式填的英文字母哪里来的。PUSH表第一列的推送类型。如bark。**

![4.webp](%E5%88%86%E7%A6%BB%E5%BC%8F%E6%8E%A8%E9%80%81%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%88%E5%B7%B2%E4%BD%BF%E7%94%A8PUSH%20js%E6%8E%A8%E9%80%81%E8%84%9A%E6%9C%AC%E7%9A%84%E5%8F%AF%E5%BF%BD%E7%95%A5%EF%BC%89%2012d1fc355aa981b7b254fe4ccffd1ba9/d1eaa5dc-5fdf-4366-8652-9704c335377e.png)

**问：CONFIG和PUSH推送的优先级**

PUSH表作为某个推送类型的总开关，例如PUSH表中bark选择了“否”，其他推送方式选择了“是”。

那么即使CONFIG表”是否通知“选择”是“且推送方式为“bark”，都不会进行推送bark推送。

但是如果推送方式为@all，那么仅”bark“方式不推送，PUSH表其他选择“是”的推送方式都推送

如果CONFIG的“是否通知”选择“否”，那么就完全不推送

**问：我想所有消息都合为一条推送怎么弄**

CONFIG表，“加入消息池”全部选择“是”即可